{% extends 'main/layout.html' %}
{% load static %}

{% block title %}Главная страница{% endblock %}

{% block style %}
<link rel="stylesheet" href="{% static 'main/css/index.css' %}">
{% endblock %}

{% block content %}
<div class="containerg">
    <h1 class="web-platform1">Веб-платформа</h1>
    <div class="onlinebox">
        <div class="textinbox">онлайн занятий</div>
        <div class="rectangleinbox"></div>
        <div class="rectangleinbox2"></div>
    </div>
    <div class="textunderonlinebox">
        Обучайтесь дистанционно в комфортных условиях, не выходя за рамки платформы.
        Профессионалы вашей сферы помогут вам с изучением любых материалов и задач.
    </div>
</div>
<script>
    // Находим элемент .onlinebox
    const onlineBox = document.querySelector('.onlinebox');
    let initialRotation = 3.757; // начальный угол поворота в градусах

    window.addEventListener('scroll', () => {
        // Рассчитываем, насколько нужно повернуть
        const scrollRotation = window.scrollY * 0.02; // Коэффициент вращения

        // Обновляем поворот элемента, уменьшая его
        onlineBox.style.transform = `rotate(${initialRotation - scrollRotation}deg)`;
    });
</script>
<script>
    document.querySelectorAll('.imgblock div img').forEach(img => {
        img.addEventListener('mouseenter', () => {
            // Получаем текущие CSS стили изображения
            const topValue = parseInt(window.getComputedStyle(img.parentElement).top); // Изменение: используем parentElement для получения top

            // Если top равен 1140px, добавляем класс `.down`, иначе — `.up`
            if (topValue === 1140) {
                img.classList.add('up'); // Сдвигаем вниз
            } else if (topValue === 1230) {
                img.classList.add('down'); // Сдвигаем вверх
            }

            // Добавляем серый фильтр ко всем остальным изображениям
            document.querySelectorAll('.imgblock div img').forEach(otherImg => {
                if (otherImg !== img) {
                    otherImg.classList.add('gray');
                }
            });
        });

        img.addEventListener('mouseleave', () => {
            // Убираем классы `.up` и `.down` после ухода мыши
            img.classList.remove('up', 'down');

            // Убираем серый фильтр со всех остальных изображений
            document.querySelectorAll('.imgblock div img').forEach(otherImg => {
                otherImg.classList.remove('gray');
            });
        });
    });
</script>
<script>
    const skrepka = document.getElementById('skrepka');

    let isDragging = false;
    let offsetX, offsetY;

    // Предотвращаем перетаскивание по умолчанию
    skrepka.addEventListener('dragstart', (e) => {
        e.preventDefault();
    });

    skrepka.addEventListener('mousedown', (e) => {
        isDragging = true;
        offsetX = e.clientX - skrepka.getBoundingClientRect().left;
        offsetY = e.clientY - skrepka.getBoundingClientRect().top;
        skrepka.style.animation = 'none'; // Убираем анимацию
        skrepka.style.transform = 'scale(1.2)'; // Увеличиваем скрепку при захвате
    });

    document.addEventListener('mousemove', (e) => {
        if (isDragging) {
            skrepka.style.left = `${e.clientX - offsetX}px`;
            skrepka.style.top = `${e.clientY - offsetY}px`;
        }
    });

    document.addEventListener('mouseup', () => {
        isDragging = false;
        skrepka.style.animation = 'float 6s ease-in-out infinite'; // Возвращаем анимацию
        skrepka.style.transform = 'scale(1)'; // Возвращаем оригинальный размер
    });
</script>

{% endblock %}
